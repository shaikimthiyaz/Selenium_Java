# Broken links

Selenium cannot directly detect whether a link is broken, because Selenium only interacts with the UI.
However, you can extract all links using Selenium and then validate each URL using **Java’s HTTP connection classes** (e.g., HttpURLConnection).

## What is a Broken Link?

A broken link is a hyperlink or image reference that does not return HTTP 200 (OK) when accessed.
Common failure response codes include:

404 – Not Found

500 – Internal Server Error

400 – Bad Request

403 – Forbidden

Timeout / Unreachable host


##  Steps to Find Broken Links in Selenium

1. Extract all links from the webpage

Links can be:

<a href="..."> elements

<img src="..."> images

<link> stylesheet links

<script src="..."> JavaScript files

But typically interviewers expect checking only a-tags.

List<WebElement> links = driver.findElements(By.tagName("a"));
System.out.println("Total links: " + links.size());

## 2. Get the URL from each element

Each WebElement may contain a valid or invalid URL.

String url = link.getAttribute("href");


We must skip null or empty URLs, because they often exist on pages.

## 3. Make an HTTP request (without opening browser)

This is the most important part.

Use **Java’s HttpURLConnection to send a HEAD request**:

  ```
URL linkURL = new URL(url);
HttpURLConnection httpConn = (HttpURLConnection) linkURL.openConnection();
httpConn.setRequestMethod("HEAD");
httpConn.connect();

int responseCode = httpConn.getResponseCode();
````

Why use HEAD?

Faster — does not download the entire page

Good enough for link validation

## 4. Check the response code

```
if (responseCode >= 400) {
    System.out.println(url + " --> Broken link (" + responseCode + ")");
} else {
    System.out.println(url + " --> Valid link");
}
  ```

##  Full Working Code (Interview-Ready Version)

```
public void checkBrokenLinks() {

    List<WebElement> links = driver.findElements(By.tagName("a"));
    System.out.println("Total links: " + links.size());

    for (WebElement element : links) {

        String url = element.getAttribute("href");

        // Skip empty or javascript links
        if (url == null || url.isEmpty() || url.startsWith("javascript")) {
            continue;
        }

        try {
            URL link = new URL(url);
            HttpURLConnection httpConn = (HttpURLConnection) link.openConnection();
            httpConn.setConnectTimeout(3000);
            httpConn.setRequestMethod("HEAD");
            httpConn.connect();

            int responseCode = httpConn.getResponseCode();

            if (responseCode >= 400) {
                System.out.println(url + " --> BROKEN (Status: " + responseCode + ")");
            } else {
                System.out.println(url + " --> Valid (Status: " + responseCode + ")");
            }

        } catch (Exception e) {
            System.out.println(url + " --> EXCEPTION: " + e.getMessage());
        }
    }
}

## Handling Broken Images (Bonus)

Same logic but using img tag:

List<WebElement> images = driver.findElements(By.tagName("img"));

#  Common Interview Follow-Up Questions + Answers

  ### 1. Can Selenium detect broken links by itself?

No. Selenium cannot verify HTTP response codes.
We must use a separate HTTP client like HttpURLConnection or Apache HttpClient.

### 2. Why is HEAD request preferred over GET?

HEAD does not download the full body, only headers

Faster and lightweight

Perfect for link validation

### 3. How do you handle links with JavaScript?

Skip them:

if (url.startsWith("javascript")) continue;

### 4. How to handle relative URLs?

Convert relative URL → absolute using:

new URL(baseURL, relativePath);

5. Can you do this in parallel?

Yes — you can use ExecutorService to speed up link validation by running checks in multiple threads.

## practical 

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.asserts.SoftAssert;

public class BrokenLinks {

	public static void main(String[] args) throws MalformedURLException, IOException {
		// TODO Auto-generated method stub
		WebDriver driver = new ChromeDriver();
		driver.get("https://rahulshettyacademy.com/AutomationPractice/");
		SoftAssert soft = new SoftAssert();
		List<WebElement> links = driver.findElements(By.xpath("//li[@class='gf-li']/a"));
		for(WebElement link:links) {
			String url = link.getDomAttribute("href");
			HttpURLConnection conn =  (HttpURLConnection) new URL(url).openConnection();
			conn.setRequestMethod("HEAD");
			conn.connect();
			int respCode = conn.getResponseCode();
			System.out.println(respCode);
//			if(respCode>=400) {
//				System.out.println("The link with text" + link.getText() + "is broken with response code "+ respCode);
//				
//			}
			
			soft.assertTrue(respCode<400,"The link with text" + link.getText() + "is broken with response code "+ respCode);
		}
		soft.assertAll();
	}

}
```
